{% load i18n l10n %}
{% load humanize %}
{% load number_utils %}


<div class="efa__detail-vis">

  <header class="page__section-header ">
    <h2 class="page__section-headline">
      {{ label.label }}
    </h2>
  </header>

  <h3 class="efa__detail-vis__sum">{{ label.total|intcomma }}&nbsp;€</h3>

  <div class="efa__detail-vis__bar-chart">
    <span class="efa__detail-vis__bar--individual" style="width: {{ label.individual_percent|unlocalize }}%"></span>
    <span class="efa__detail-vis__bar--aggregated" style="width: {{ label.aggregated_percent|unlocalize }}%"></span>
  </div>

  <ul class="efa__detail-vis__labels">
    <li class="efa__detail-vis__label--individual">{{ label.individual_percent }}% Individual</li>
    <li class="efa__detail-vis__label--aggregated">{{ label.aggregated_percent }}% Aggregated</li>
  </ul>

  {% blocktrans with percent=label.individual_percent|floatformat:0 %}
    {{ percent }}&nbsp;% amount to known recipients
  {% endblocktrans %}
  {% blocktrans with percent=label.aggregated_percent|floatformat:0 %}
    {{ percent }}&nbsp;% amount to unknown recipients
  {% endblocktrans %}

  <ol>
  {% for recipient in label.top5 %}
    <li>
      <a href="{{ recipient.get_absolute_url }}">
        <span class="efa__detail-vis__value">{{ recipient.amount|intcomma_floatformat:2 }}&nbsp;€</span>
        <span class="efa__detail-vis__name">{{ recipient.get_full_name }}</span>
      </a>
    </li>
  {% endfor %}
  </ol>
</div>
