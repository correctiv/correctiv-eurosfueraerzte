{% extends "correctiv_eurosfueraerzte/base_recipients.html" %}

{% load i18n %}
{% load number_utils %}


{% block title %}{% blocktrans with query=query %}Search for „{{ query }}” in Euros for Doctors Database{% endblocktrans %}{% endblock %}

{% block additional_meta %}
<meta name="description" content="{% blocktrans %}The database about money flows from pharma companies to doctors.{% endblocktrans %}">
{% endblock %}

{% block content %}
{% if object_list %}
  <div class="table-responsive">
    <table class="efa__table table table-striped">
      <thead>
        <tr>
          <th>{% trans "Name" %}</th>
          <th>{% trans "Address" %}</th>
          <th class="text-right">{% trans "Total amount" %}</th>
        </tr>
      </thead>
    {% for object in object_list %}
      <tr>
        <td>
          <a href="{{ object.get_absolute_url }}">
            {{ object.get_full_name }}
          </a>
        </td>
        <td>
          {{ object.address }}<br/>
          {{ object.postcode }} {{ object.location }}
        </td>
        <td class="text-right">
          {% if object.computed_total %}
            {{ object.computed_total|intcomma_floatformat:2 }}&nbsp;€
          {% else %}
            {{ object.total|intcomma_floatformat:2 }}&nbsp;€
          {% endif %}
        </td>
      </tr>
    {% endfor %}
    </table>
  </div>
{% else %}
  <div class="page__row">
    <div class="page__section -narrow">

      <p>
        {% blocktrans %}
          We could not find any person or organisation for the search criteria.
        {% endblocktrans %}
      </p>
      <p>
        {% blocktrans %}
          Please note that <strong>only 30% of doctors</strong> allowed pharma companies to release their names. Only these persons are included in the database.
        {% endblocktrans %}
      </p>
      <p>
        {% trans "Try these example searches:" %}
        <a href="{% url 'eurosfueraerzte:eurosfueraerzte-recipientsearch' %}?q=45147">45147</a>
        {% trans "or" %}
        <a href="{% url 'eurosfueraerzte:eurosfueraerzte-recipientsearch' %}?q=Dinslaken">Dinslaken</a>
        {% trans "or" %}
        <a href="{% url 'eurosfueraerzte:eurosfueraerzte-recipientsearch' %}?q=müller">Müller</a>
      </p>
    </div>
  </div>
{% endif %}
{% if page_obj.has_other_pages %}
  {% include "pagination.html" with page_obj=page_obj getvars="&"|add:getvars %}
{% endif %}
{% endblock %}
